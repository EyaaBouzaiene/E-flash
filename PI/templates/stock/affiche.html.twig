{% extends 'base.html.twig' %}

{% block content %}

	<section>
		<div class="container">
			<div class="title">
				
				<h1 class="font-weight-bold" align="center"> Stocks</h1>
			</div>

		</br>


			
				<script src="{{ asset('js/jquery.min.js') }}"></script>
				<input type="text"  class="form-control" placeholder="Look for a Stock" id="ach">
			


	
	<div class="col-lg-50">
		<div class="card">
			<div class="card-header">
				<strong class="card-title">Table de Stock</strong>
			</div>
			{% for message in app.flashes('notice') %}
				<div class="alert alert-success">
					{{ message }}
				</div>
			{% endfor %}
			<div class="card-body">

				<div class="table-responsive">

					

<a href="{{path('downloadpdf')}}">	
 <button type="button" class="btn btn-outline-info btn-icon-text" onclick="updatepartenaires">
                          Print
                          <i class="ti-printer btn-icon-append"></i>                                                                              
                        </button>
						</a>

<a href="{{path('mailstock')}}">	 
<button type="button" class="btn btn-info" >VerifStock</button>
</a>



<button type="button" class="btn btn-info" onclick="window.location.href='{{ path('tri') }}'" >TRIE PAR QUALITE
<i class="ti-split-v"></i>
</button>

<div class="card-header">
					<strong class="card-title"></strong>
				</div>


					<table class="table  table-hover table-bordered" id="tableau">

						<thead class="badge-info">
							<tr></tr>
							<tr>
							
 
	
								<th>Nom du Stock</th>
								<th>Réference</th>
								<th>Categorie</th>
								<th>Quantite</th>
								<th>Date</th>
								<th>Qualite</th>
								<th>Nom Partenaire</th>
                                 <th  >Modifier</th>
                                <th  >Supprimer</th>

							</tr>
						</thead>


						

							<tbody id="tableau">
							{% for compteur in affiche %}
								<tr>

									<td>
										{{compteur.nomS}}
									</td>
									<td>
										{{compteur.refS}}
									</td>
									<td>
										{{compteur.categorieS }}
									</td>
									<td>
										{{compteur.qteS}}
									</td>

									<td>
										{{compteur.dateS | date("d/m/Y") }}</td>
									<td>
										{{compteur.qualiteS}}
									</td>
									
									<td>
										{{compteur.partenaire.nomMarqueP}}
									</td>
                                    <td><a  href="{{path('updatestock',{'id':compteur.id })}}" class="btn btn-outline-info  w-100 p-2 "><i class="fa fa-pencil" aria-hidden="true"></i></a></td>
                                       <td><a   href="{{path('dellclass',{'id':compteur.id })}}" class="btn btn-outline-danger  w-100 p-2" class="btn badge-info"><i class="fa fa-trash-o" aria-hidden="true"></i></a></td>
								</tr>
							
<script>
        $(document).ready(function(){
            $('#ach').keyup(function(){
                search_table($(this).val());
            });
            function search_table(value){
                $('#tableau tbody tr ').each(function(){
                    var found = 'false';
                    $(this).each(function(){
                        if($(this).text().toLowerCase().indexOf(value.toLowerCase()) >= 0)
                        {
                            found = 'true';
                        }
                    });
                    if(found == 'true')
                    {
                        $(this).show();

                    }
                    else
                    {
                        $(this).hide();

                    }
                });
            }
        });
    </script>

						{% endfor %}

                      
						</tbody>
					</table>

				</div>

				 
</div>
</div>

 <div class="mt-4">
						{{ knp_pagination_render(affiche) }}
					</div>    
{# block stat #}
								<div class="col-lg-50">
		<div class="card">
			<div class="card-header">
				<strong class="card-title">Statistique</strong>
			</div>
						<div class="card-body">

				<div class="table-responsive">

<table class="table  table-hover table-bordered">

					</table>
					<table class="table  table-hover table-bordered">

						<thead class="badge-info">						
				</tbody>                                 
											</table>

				</div>

					<div class="container">
			<div class="Statistique">


<style>
    .example-wrapper { margin: 1em auto; max-width: 50%; width: 50%; font: 20px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>
		<H1>Quantité du Stock</H1>
               
 <div class="example-wrapper">          
            <canvas id="chart"   width="80" height="80" ></canvas>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" integrity="sha512-s+xg36jbIujB2S2VKfpGmlC3T5V2TF3lY48DX7u2r9XzGzgPsa6wTpOQA7J9iffvdeBN0q9tKzRxVxw1JviZPg==" crossorigin="anonymous"></script>
<script>

  const image = new Image();
image.src = 'https://www.chartjs.org/img/chartjs-logo.svg';

const plugin = {
  id: 'custom_canvas_background_image',
  beforeDraw: (chart) => {
    if (image.complete) {
      const ctx = chart.ctx;
      const {top, left, width, height} = chart.chartArea;
      const x = left + width / 2 - image.width / 2;
      const y = top + height / 2 - image.height / 2;
      ctx.drawImage(image, x, y);
    } else {
      image.onload = () => chart.draw();
    }
  }
};
    let user = document.querySelector("#chart")
    let annGraph = new Chart(user, {
        type: "doughnut",
		plugins: [plugin],
        data: {
            labels: {{ nomStock|raw }},
            datasets: [{
                label: "nom du Stock",
				 backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
			 borderWidth: 1,

                    borderColor : 'rgb(30,144,255)',
					 fill: false,
 tension: 0.1,
                data: {{ quantite|raw }}
            }]
        },
        options: {
			 animations: {
      tension: {
        duration: 1000,
        easing: 'linear',
        from: 1,
        to: 0,
        loop: true
      }
    },
            scales: {
				
                yAxes: [{
                    ticks: {
                        beginAtZero: true
						 
                    }
					
					
                }]
				
            }
        }
    })
</script>



			{# BarChart #}
	



  <div id="div_chart"></div>
    
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        {{ gc_draw(BarChart, 'div_chart') }}
    </script>



</div>
</div>
				</div>
				
			</div>
		

          
        </div>

        
            </div>
</div>


    </div>
</div>   
   

	<script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
				<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.4/dist/umd/popper.min.js"></script>
				<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
				<script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/dist/jquery.matchHeight.min.js"></script>


{% endblock %}


